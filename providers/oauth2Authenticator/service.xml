<sequence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		disabled="false"
		id="c2855de2-9d99-47cb-ba3a-50dc7d650470"
		lineNumber="1">
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="e90d1d36-04b4-49e1-8c42-ebe427d4eeee"
			lineNumber="2">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="1f737e88-c478-4132-a781-6a97b6c65e55"
				serviceId="nabu.cms.oauth2.client.crud.oauth2ProviderLogin.services.get"
				resultName="result557c702d06eb41c0a61b92b1ccd720ad"
				temporaryMapping="true"
				x="117"
				y="48"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="6e06dea0-85b2-4437-8888-8d715fb1e0ea"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>input/credentials/name</from>
				<to>id</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="81783216-bea2-4a5a-b31b-3545e1130430"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result557c702d06eb41c0a61b92b1ccd720ad/result</from>
			<to>login</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Throw"
			description="=&quot;Invalid login details: &quot; + input/credentials/name"
			disabled="false"
			id="9ac70b62-edb2-4cbb-97c2-c3e778b4c653"
			label="!login"
			lineNumber="3"
			message="Invalid login details" xsi:nil="true"/>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="1bdd4cd2-dd99-4f69-97cb-cfb30e0e7c4e"
			lineNumber="4">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="b4fab97d-f792-4a6f-9512-ac0091405649"
				serviceId="nabu.cms.oauth2.client.providers.getToken"
				resultName="result2cdfde94369646138d06d34406083404"
				temporaryMapping="true"
				x="99"
				y="40"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="d7872906-8f70-4bb4-a01b-5f626d9f8af8"
					mask="false"
					optional="false"
					fixedValue="true">
				<from>authorization_code</from>
				<to>grantType</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="e89d8c94-4882-4c47-a0d6-32e193ed73dd"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>input/credentials/password</from>
				<to>code</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="accdbfa4-ef38-4766-90d5-2fa66d27d70d"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>input/credentials/name</from>
				<to>oauth2ProviderLoginId</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="6935d319-426e-4ddc-b8b5-05ac2a31037e"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result2cdfde94369646138d06d34406083404/token</from>
			<to>token</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="96053940-9985-4b61-86a2-70ae4349890e"
			lineNumber="5">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="2abe1926-178c-4f63-a8ac-ced06911a3b4"
				serviceId="nabu.cms.oauth2.client.providers.getUserInfo"
				resultName="resulta6b1a2cd201a4af1bedabf078a39b5c2"
				temporaryMapping="true"
				x="162"
				y="82"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="ac21d632-8f09-4615-80da-0e3c6ac87d74"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>login/oauth2ProviderId</from>
				<to>oauth2ProviderId</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="3451c244-f139-4477-96ff-7f154e49483d"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>token</from>
				<to>token</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="b9124be7-a520-4eb4-a40e-2ff8c1a16126"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resulta6b1a2cd201a4af1bedabf078a39b5c2/userInfo</from>
			<to>userInfo</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="37e37743-47ec-4081-a5c8-6a031d68cf43"
			lineNumber="6">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="7e9059b9-a79f-4041-bdb9-27be0eff1c92"
				serviceId="nabu.cms.oauth2.client.providers.basic.getUser"
				resultName="resultdc21d2235b244ca49a5ea8764eb164b2"
				temporaryMapping="true"
				x="152"
				y="59"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="f26f8649-63c4-4201-8070-be055101fe66"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>login/oauth2ProviderId</from>
				<to>oauth2ProviderId</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="ca81f963-d9f9-4ec6-86e0-1965665a5fcc"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>token</from>
				<to>token</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="44c468f6-95d9-4e98-a7db-42f2bf928d9e"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>userInfo</from>
				<to>userInfo</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="168660fc-e12b-433d-919a-769ea5f0e99e"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resultdc21d2235b244ca49a5ea8764eb164b2/userId</from>
			<to>userId</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="569a219c-b2a8-4530-8c01-eb9d5d50daf8"
			label="userId != null"
			lineNumber="7">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="cf784773-bcaf-461c-a0d9-7183fcc5ee29"
				serviceId="nabu.cms.core.crud.user.services.get"
				resultName="result60731fea698d45ceb2d0dc45f3fa0fe4"
				temporaryMapping="true"
				x="81"
				y="67"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="b1fad9d7-bea5-4660-9ec6-1caf6a97090e"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>userId</from>
				<to>id</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="88c5b76e-4b14-442f-bfab-6be12fa04bb7"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result60731fea698d45ceb2d0dc45f3fa0fe4/result/verificationCode</from>
			<to>output/token/name</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="5477bb58-fdc4-4d26-9b9b-0debd9eee487"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result60731fea698d45ceb2d0dc45f3fa0fe4/result/realm</from>
			<to>output/token/realm</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="dbeceaa1-7811-400c-a1db-6e59080b171d"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result60731fea698d45ceb2d0dc45f3fa0fe4/result/id</from>
			<to>output/token/authenticationId</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="cfa1c481-4613-4289-ae04-db3afe90b225"
			lineNumber="8">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="869a3cc2-1438-4d52-a9cf-a372b068b765"
				serviceId="nabu.utils.Date.now"
				resultName="resultb0e2d26328f545e49fe6b2e1d4eb65ee"
				temporaryMapping="true"
				x="268"
				y="198"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="b39c98dc-df43-486b-aba1-83f1156c0319"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resultb0e2d26328f545e49fe6b2e1d4eb65ee/date</from>
			<to>login/used</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="57d22fdb-4ca1-401a-aff1-fe477d18aea6"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>token/access_token</from>
			<to>login/token</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="636df4c4-6e37-4670-a005-72d0f2903130"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>token/refresh_token</from>
			<to>login/refreshToken</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="4f404dd3-bf7d-4f24-8719-b1e0fadc7981"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>userId</from>
			<to>login/userId</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="63b5538c-c36c-4cbc-9c2e-a6b0844dfec8"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>token/scope</from>
			<to>login/grantedScopes</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="ff9366d9-01ec-4677-8571-9841e67fb52f"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>userInfo/sub</from>
			<to>login/accountId</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="e4d20760-06da-47d9-b0eb-10152d5c655b"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>token/token_type</from>
			<to>login/tokenType</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="b580c3a2-04cd-4835-a3a7-5be33d08e2b1"
			label="token/expires_in != null"
			lineNumber="9">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="da510a29-2b26-4a49-8e43-26f7040d2a76"
				serviceId="nabu.utils.Date.increment"
				resultName="result47d85be297c949b4aaa7c0456b822e9e"
				temporaryMapping="true"
				x="67"
				y="24"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="bfa08888-0254-4568-81a6-994935146655"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>token/expires_in</from>
				<to>increment</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="5cfa5493-3d5a-48b7-9249-9619c128e1b6"
					mask="false"
					optional="false"
					fixedValue="true">
				<from>SECONDS</from>
				<to>unit</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="a39a4d57-4c0f-4681-8d49-34543cae25e6"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result47d85be297c949b4aaa7c0456b822e9e/date</from>
			<to>login/expires</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="5f595270-e783-4945-bb24-f01d69f718ec"
			lineNumber="10">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="d670194e-8090-4602-9990-d4d41b0790f4"
				serviceId="nabu.cms.oauth2.client.crud.oauth2ProviderLogin.services.update"
				resultName="result7dfac4479e6e49598a76c7c70ff98de9"
				temporaryMapping="true"
				x="52"
				y="112"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="bcb9d79d-4766-4fb1-822e-fd3d2f7d5a7a"
					mask="true"
					optional="false"
					fixedValue="false">
				<from>login</from>
				<to>instance</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="145acbf2-ba66-47af-87fd-855c23c93fd1"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>login/id</from>
				<to>id</to>
			</steps>
		</steps>
	</steps>
</sequence>